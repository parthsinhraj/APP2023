package me.rajpp;

import java.util.Random;

import com.badlogic.gdx.ApplicationAdapter;
import com.badlogic.gdx.Gdx;
import com.badlogic.gdx.Game;
import com.badlogic.gdx.graphics.Texture;
import com.badlogic.gdx.graphics.g2d.BitmapFont;
import com.badlogic.gdx.graphics.g2d.SpriteBatch;
import com.badlogic.gdx.utils.ScreenUtils;

public class MyGdxGame extends Game {

	private SpriteBatch batch;
	private Texture img;
	private DeckStack playerDeck;
	private DeckStack botDeck;
	private DeckStack middleDeck;
	
	
	private Boolean playerTurn;
	
	
	private Texture foldbutton;
	
	private Texture backofCard1;
	private Texture backOfCard2;
	private Texture backOfCard3;
	private Texture backOfCard4;


	private Texture aceOfHearts;
	private Texture twoOfHearts;
	private Texture threeOfHearts;
	private Texture fourOfHearts;
	private Texture fiveOfHearts;
	private Texture sixOfHearts;
	private Texture sevenOfHearts;
	private Texture eightOfHearts;
	private Texture nineOfHearts;
	private Texture tenOfHearts;
	private Texture jackOfHearts;
	private Texture queenOfHearts;
	private Texture kingOfHearts;
	private Texture aceOfDiamonds;
	private Texture twoOfDiamonds;
	private Texture threeOfDiamonds;
	private Texture fourOfDiamonds;
	private Texture fiveOfDiamonds;
	private Texture sixOfDiamonds;
	private Texture sevenOfDiamonds;
	private Texture eightOfDiamonds;
	private Texture nineOfDiamonds;
	private Texture tenOfDiamonds;
	private Texture jackOfDiamonds;
	private Texture queenOfDiamonds;
	private Texture kingOfDiamonds;
	private Texture aceOfClubs;
	private Texture twoOfClubs;
	private Texture threeOfClubs;
	private Texture fourOfClubs;
	private Texture fiveOfClubs;
	private Texture sixOfClubs;
	private Texture sevenOfClubs;
	private Texture eightOfClubs;
	private Texture nineOfClubs;
	private Texture tenOfClubs;
	private Texture jackOfClubs;
	private Texture queenOfClubs;
	private Texture kingOfClubs;
	private Texture aceOfSpades;
	private Texture twoOfSpades;
	private Texture threeOfSpades;
	private Texture fourOfSpades;
	private Texture fiveOfSpades;
	private Texture sixOfSpades;
	private Texture sevenOfSpades;
	private Texture eightOfSpades;
	private Texture nineOfSpades;
	private Texture tenOfSpades;
	private Texture jackOfSpades;
	private Texture queenOfSpades;
	private Texture kingOfSpades;

	
	
	public void startGame()
	{
	    playerDeck = new DeckStack();
	    botDeck = new DeckStack();
	    middleDeck = new DeckStack();
	    
	    initalize();
	   
	}
	
	@Override
	public void create () {
	    backofCard1  = new Texture("BackofCard1.png");
		batch = new SpriteBatch();
		img = new Texture("desertbackground.png");
		backOfCard2 = new Texture("BackOfCard2.png");
		backOfCard3 = new Texture(Gdx.files.internal("BackOfCard3.png"));
	    backOfCard4 = new Texture(Gdx.files.internal("BackOfCard4.png"));
	    
	    foldbutton = new Texture(Gdx.files.internal("foldbutton.png"));
	    
	    aceOfHearts = new Texture(Gdx.files.internal("AceOfHearts.png"));
	    twoOfHearts = new Texture(Gdx.files.internal("TwoOfHearts.png"));
	    threeOfHearts = new Texture(Gdx.files.internal("ThreeOfHearts.png"));
	    fourOfHearts = new Texture(Gdx.files.internal("FourOfHearts.png"));
	    fiveOfHearts = new Texture(Gdx.files.internal("FiveOfHearts.png"));
	    sixOfHearts = new Texture(Gdx.files.internal("SixOfHearts.png"));
	    sevenOfHearts = new Texture(Gdx.files.internal("SevenOfHearts.png"));
	    eightOfHearts = new Texture(Gdx.files.internal("EightOfHearts.png"));
	    nineOfHearts = new Texture(Gdx.files.internal("NineOfHearts.png"));
	    tenOfHearts = new Texture(Gdx.files.internal("TenOfHearts.png"));
	    jackOfHearts = new Texture(Gdx.files.internal("JackOfHearts.png"));
	    queenOfHearts = new Texture(Gdx.files.internal("QueenOfHearts.png"));
	    kingOfHearts = new Texture(Gdx.files.internal("KingOfHearts.png"));
	    aceOfDiamonds = new Texture(Gdx.files.internal("AceOfDiamonds.png"));
	    twoOfDiamonds = new Texture(Gdx.files.internal("TwoOfDiamonds.png"));
	    threeOfDiamonds = new Texture(Gdx.files.internal("ThreeOfDiamonds.png"));
	    fourOfDiamonds = new Texture(Gdx.files.internal("FourOfDiamonds.png"));
	    fiveOfDiamonds = new Texture(Gdx.files.internal("FiveOfDiamonds.png"));
	    sixOfDiamonds = new Texture(Gdx.files.internal("SixOfDiamonds.png"));
	    sevenOfDiamonds = new Texture(Gdx.files.internal("SevenOfDiamonds.png"));
	    eightOfDiamonds = new Texture(Gdx.files.internal("EightOfDiamonds.png"));
	    nineOfDiamonds = new Texture(Gdx.files.internal("NineOfDiamonds.png"));
	    tenOfDiamonds = new Texture(Gdx.files.internal("TenOfDiamonds.png"));
	    jackOfDiamonds = new Texture(Gdx.files.internal("JackOfDiamonds.png"));
	    queenOfDiamonds = new Texture(Gdx.files.internal("QueenOfDiamonds.png"));
	    kingOfDiamonds = new Texture(Gdx.files.internal("KingOfDiamonds.png"));
	    aceOfClubs = new Texture(Gdx.files.internal("AceOfClubs.png"));
	    twoOfClubs = new Texture(Gdx.files.internal("TwoOfClubs.png"));
	    threeOfClubs = new Texture(Gdx.files.internal("ThreeOfClubs.png"));
	    fourOfClubs = new Texture(Gdx.files.internal("FourOfClubs.png"));
	    fiveOfClubs = new Texture(Gdx.files.internal("FiveOfClubs.png"));
	    sixOfClubs = new Texture(Gdx.files.internal("SixOfClubs.png"));
	    sevenOfClubs = new Texture(Gdx.files.internal("SevenOfClubs.png"));
	    eightOfClubs = new Texture(Gdx.files.internal("EightOfClubs.png"));
	    nineOfClubs = new Texture(Gdx.files.internal("NineOfClubs.png"));
	    tenOfClubs = new Texture(Gdx.files.internal("TenOfClubs.png"));
	    jackOfClubs = new Texture(Gdx.files.internal("JackOfClubs.png"));
	    queenOfClubs = new Texture(Gdx.files.internal("QueenOfClubs.png"));
	    kingOfClubs = new Texture(Gdx.files.internal("KingOfClubs.png"));
	    aceOfSpades = new Texture("AceOfSpades.png");
	    twoOfSpades = new Texture(Gdx.files.internal("TwoOfSpades.png"));
	    threeOfSpades = new Texture(Gdx.files.internal("ThreeOfSpades.png"));
	    fourOfSpades = new Texture(Gdx.files.internal("FourOfSpades.png"));
	    fiveOfSpades = new Texture(Gdx.files.internal("FiveOfSpades.png"));
	    sixOfSpades = new Texture(Gdx.files.internal("SixOfSpades.png"));
	    sevenOfSpades = new Texture(Gdx.files.internal("SevenOfSpades.png"));
	    eightOfSpades = new Texture(Gdx.files.internal("EightOfSpades.png"));
	    nineOfSpades = new Texture(Gdx.files.internal("NineOfSpades.png"));
	    tenOfSpades = new Texture(Gdx.files.internal("TenOfSpades.png"));
	    jackOfSpades = new Texture(Gdx.files.internal("JackOfSpades.png"));
	    queenOfSpades = new Texture(Gdx.files.internal("QueenOfSpades.png"));
	    kingOfSpades = new Texture(Gdx.files.internal("KingOfSpades.png"));
	}

	@Override
	public void render () {
		ScreenUtils.clear(0, 0, 0, 0);
		batch.begin();
		Gdx.graphics.setWindowedMode(540, 960);
		batch.draw(img, 0, 0, img.getWidth(), img.getHeight());
	    batch.getProjectionMatrix().setToOrtho2D(0, 0, 540, 960);
	    
	    
	    //initalize();
	    
	    
	    //when the person puts down a card
	    //play();
	    
	    
	    batch.draw(backOfCard3, 185, 10, 138, 201);
	    
	    batch.draw(aceOfSpades, 147, 277, 250, 401);
	    
	    batch.draw(backOfCard2, 185, 749, 138, 201); 
	    
	    batch.draw(foldbutton, 15, 15, 124, 62);

	    //maybe add a pointer signifying whose turn it is
		batch.end();
		super.render();
		
	}
	
	@Override
	public void dispose () {
		batch.dispose();
		img.dispose();
	}
	
	public void play()
	{
	    if(playerDeck.size() != 0)
	    {
	        middleDeck.push(playerDeck.pop());
	        batch.draw(cardImage(middleDeck.peek()), 147, 277, 250, 401);
	    }
	    if(ifFaceCard())
	    {
	        //make it say how many to draw
	        draw(findDrawAmount());
	        
	    }
	   
	}
	
	
	public void initalize()
	{
	    DeckStack originalDeck = new DeckStack();
	    String[] suits = {"club", "diamond", "heart", "spade"};
	    int[] rank = {1,2,3,4,5,6,7,8,9,10,11,12,13};
	    
	    for(int num: rank)
	    {
	        for(String suit: suits)
	        {
	            originalDeck.push(new Card(suit, num));
	        }
	    }
	    
	    DeckStack shuffledDeck = randomize(originalDeck);
	    
	    for(int i = 0; i < 52; i++)
	    {
	        playerDeck.push(shuffledDeck.pop());
	        botDeck.push(shuffledDeck.pop());
	    }    
	}
	
	public DeckStack randomize(DeckStack deck)
	{
	    Random rand = new Random();
	    
	    DeckStack newDeck = new DeckStack();
	    int findCard;
	    
	    for(int i = 0; i < 52; i++)
	    {
	        findCard = rand.nextInt(deck.size());
	        newDeck.push(deck.pop(findCard));
	    }
	    
	    return newDeck;     
	}
	
	public void draw(int amount)
    {
        for(int i = 0; i < amount; i++)
        {
            middleDeck.push(botDeck.pop());
            batch.draw(cardImage(middleDeck.peek()), 147, 277, 250, 401);
            if(ifFaceCard())
            {
                draw(findDrawAmount());
            }
        }
        if(getTurn())
        {
            for(int i = 0; i < middleDeck.size(); i++)
            {
                playerDeck.push(middleDeck.pop());
                batch.draw(backOfCard3, 185, 10, 138, 201);
            }
        }

    }
    
    public boolean getTurn()
    {
        return playerTurn;
    }
    
    public void changeTurn()
    {
        playerTurn = !playerTurn;
    }
    
	public int findDrawAmount()
	{
	    int topCard = middleDeck.peek().getRank();
	    
	    switch(topCard)
	    {
	        case 1:
	            return 4;
	        
	        case 11:
	            return 1;
	            
	        case 12:
	            return 2;
	            
	        case 13:
	            return 3;
	    }
	    return -1;
	}
	
	public boolean ifFaceCard()
	{
	    int topCard = middleDeck.peek().getRank();
	    if(topCard == 1 || topCard == 11 || topCard == 12 || topCard == 13)
	    {
	        return true;
	    }
	    return false;
	}
	
	
	public boolean slapable()
	{
	    try {
	        return doubles() || marriage() || topBottom() || sandwich();
	    }
	    catch(ArrayIndexOutOfBoundsException e)
	    {
	        return false;
	    }
	}
	
	public boolean doubles()
	{
	    return middleDeck.peek().getRank() == middleDeck.get(middleDeck.size() - 2).getRank();
	}
	
	public boolean marriage()
	{
	    if(middleDeck.peek().getRank() == 13)
	    {
	        if(middleDeck.get(middleDeck.size() - 2).getRank() == 12)
	        {
	            return true;
	        }
	    }
	    else if(middleDeck.peek().getRank() == 12)
	    {
	        if(middleDeck.get(middleDeck.size() - 2).getRank() == 13)
            {
                return true;
            }
	    }
	    return false;
	}
	
	public boolean topBottom()
	{
	    return middleDeck.peek().getRank() == middleDeck.get(0).getRank();
	}
	
	public boolean sandwich()
	{
	    return middleDeck.peek().getRank() == middleDeck.get(middleDeck.size() - 3).getRank();
	}
	
	public Texture cardImage(Card card)
	{
	    int rank = card.getRank();
	    String suit = card.getSuit();
	    
	    if(rank == 1)
	    {
	        if(suit.equals("heart"))
	            return aceOfHearts;
	        if(suit.equals("diamond"))
	            return aceOfDiamonds;
	        if(suit.equals("club"))
	            return aceOfClubs;
	        if(suit.equals("spade"))
	            return aceOfSpades;
	    }
	    else if(rank == 2)
        {
            if(suit.equals("heart"))
                return twoOfHearts;
            if(suit.equals("diamond"))
                return twoOfDiamonds;
            if(suit.equals("club"))
                return twoOfClubs;
            if(suit.equals("spade"))
                return twoOfSpades;
        }
	    else if(rank == 3)
        {
            if(suit.equals("heart"))
                return threeOfHearts;
            if(suit.equals("diamond"))
                return threeOfDiamonds;
            if(suit.equals("club"))
                return threeOfClubs;
            if(suit.equals("spade"))
                return threeOfSpades;
        }
	    else if(rank == 4)
        {
            if(suit.equals("heart"))
                return fourOfHearts;
            if(suit.equals("diamond"))
                return fourOfDiamonds;
            if(suit.equals("club"))
                return fourOfClubs;
            if(suit.equals("spade"))
                return fourOfSpades;
        }
	    else if(rank == 5)
        {
            if(suit.equals("heart"))
                return fiveOfHearts;
            if(suit.equals("diamond"))
                return fiveOfDiamonds;
            if(suit.equals("club"))
                return fiveOfClubs;
            if(suit.equals("spade"))
                return fiveOfSpades;
        }
	    else if(rank == 6)
        {
            if(suit.equals("heart"))
                return sixOfHearts;
            if(suit.equals("diamond"))
                return sixOfDiamonds;
            if(suit.equals("club"))
                return sixOfClubs;
            if(suit.equals("spade"))
                return sixOfSpades;
        }
	    else if(rank == 7)
        {
            if(suit.equals("heart"))
                return sevenOfHearts;
            if(suit.equals("diamond"))
                return sevenOfDiamonds;
            if(suit.equals("club"))
                return sevenOfClubs;
            if(suit.equals("spade"))
                return sevenOfSpades;
        }
	    else if(rank == 8)
        {
            if(suit.equals("heart"))
                return eightOfHearts;
            if(suit.equals("diamond"))
                return eightOfDiamonds;
            if(suit.equals("club"))
                return eightOfClubs;
            if(suit.equals("spade"))
                return eightOfSpades;
        }
	    else if(rank == 9)
        {
            if(suit.equals("heart"))
                return nineOfHearts;
            if(suit.equals("diamond"))
                return nineOfDiamonds;
            if(suit.equals("club"))
                return nineOfClubs;
            if(suit.equals("spade"))
                return nineOfSpades;
        }
	    else if(rank == 10)
        {
            if(suit.equals("heart"))
                return tenOfHearts;
            if(suit.equals("diamond"))
                return tenOfDiamonds;
            if(suit.equals("club"))
                return tenOfClubs;
            if(suit.equals("spade"))
                return tenOfSpades;
        }
	    else if(rank == 11)
        {
            if(suit.equals("heart"))
                return jackOfHearts;
            if(suit.equals("diamond"))
                return jackOfDiamonds;
            if(suit.equals("club"))
                return jackOfClubs;
            if(suit.equals("spade"))
                return jackOfSpades;
        }
	    else if(rank == 12)
        {
            if(suit.equals("heart"))
                return queenOfHearts;
            if(suit.equals("diamond"))
                return queenOfDiamonds;
            if(suit.equals("club"))
                return queenOfClubs;
            if(suit.equals("spade"))
                return queenOfSpades;
        }
	    else if(rank == 13)
        {
            if(suit.equals("heart"))
                return kingOfHearts;
            if(suit.equals("diamond"))
                return kingOfDiamonds;
            if(suit.equals("club"))
                return kingOfClubs;
            if(suit.equals("spade"))
                return kingOfSpades;
        }
	    return null; 
	}
	
	
}
